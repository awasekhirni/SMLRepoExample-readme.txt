
VIEW CustomerOrderSummary
  SEMANTICS:
    PURPOSE: "Aggregate customer order metrics for reporting"
    MATERIALIZATION: "Refresh daily at 02:00 UTC"
    FRESHNESS_REQUIREMENT: "24 hours maximum"
    CONSUMERS: ["BI Dashboard", "CRM System", "Marketing Platform"]
  
  DEFINITION:
    SOURCE_TABLES: ["Customers", "Orders", "OrderItems"]
    JOIN_LOGIC: "Left outer join for all customers"
    AGGREGATION: "SUM, COUNT, AVG by customer"
  
  COLUMNS:
    customer_id: "UUID from Customers"
    total_orders: "COUNT(DISTINCT order_id)"
    total_spent: "SUM(amount_paid)"
    avg_order_value: "AVG(amount_paid)"
    last_order_date: "MAX(order_date)"
    favorite_category: "MODE() within group of product categories"
  
  PERFORMANCE:
    INDEXES_USED: 
      - "idx_orders_customer_date"
      - "idx_customers_tenant"
    QUERY_TIMEOUT: "30 seconds"
    RESULT_CACHING: "2 hours"
  
  SECURITY:
    INHERITS_PERMISSIONS: "FROM underlying tables"
    DYNAMIC_MASKING: "Excludes PII columns"
END_VIEW
